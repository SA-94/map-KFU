<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>ุฎุฑูุทุฉ ุงููุงุนุงุช โ ูููุฉ ุงูุนููู ุงูุฒุฑุงุนูุฉ ูุงูุฃุบุฐูุฉ โ ุฌุงูุนุฉ ุงูููู ููุตู</title>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="tooltip" id="tooltip">ุงุณุญุจ ููุฎุฑูุทุฉุ ูุงุณุชุฎุฏู ุงูุชูุจูุฑ/ุงูุชุตุบูุฑ ุจุงูููุณ</div>

  <header class="topbar" role="banner">
    <button id="theme-toggle" class="theme-btn" aria-label="ุชุจุฏูู ุงููุถุน">๐</button>
    <h1 class="brand">ุฎุฑูุทุฉ ุงููุงุนุงุช</h1>
    <button id="menuToggle" class="menu-toggle" aria-label="ูุชุญ ุงููุงุฆูุฉ" aria-expanded="false">
      <span class="bar"></span><span class="bar"></span><span class="bar"></span>
    </button>
  </header>

  <nav id="sidebar" class="sidebar" aria-hidden="true">
    <button id="closeSidebar" class="close-btn" aria-label="ุฅุบูุงู ุงููุงุฆูุฉ">ร</button>
    <h2 class="side-h2">ุงููุงุฆูุฉ</h2>
    <div class="side-actions">
      <button id="openHomeInfo" class="btn-primary large">ุชุนุฑูู</button>
      <button id="openEmailModal" class="btn-primary large">ุงุณุชุฎุฑุงุฌ ุงูุจุฑูุฏ ุงูุฌุงูุนู</button>
      <button id="openComplaintModal" class="btn-primary large accent">ุชูุงุตู ูุนูุง / ุงุฑูุน ุงูุชุฑุงุญ</button>

      <!-- ุถุน ุฑูู ุงูุนููุฏ ุจุตูุบุฉ ุฏูููุฉ ุจุฏูู + ุจุฏู PLACEHOLDER_NUMBER -->
      <a id="waDeanBtn" class="btn-primary large" href="https://wa.me/PLACEHOLDER_NUMBER?text=%D8%B3%D9%84%D8%A7%D9%85" target="_blank" rel="noopener noreferrer" role="button">ูุฑุงุณูุฉ ุงูุนููุฏ ุนุจุฑ ูุงุชุณุงุจ</a>

      <button id="openDeanModal" class="btn-primary large">ุนู ุงูุนููุฏ</button>

      <div class="about-frame" style="margin-top:8px;">
        <button id="openAboutModal" class="btn-about">ูู ูุญู</button>
      </div>
    </div>

    <div class="credit-card" aria-hidden="false" style="margin-top:12px;">
      <div class="credit-inner">
        <div class="credit-title">ุชุตููู ูุจุฑูุฌุฉ</div>
        <div id="creditName" class="credit-name">ููุฏ ุงููุญุทุงูู</div>
        <div class="credit-meta">ุทุงูุจ ูููุฉ ุงูุนููู ุงูุฒุฑุงุนูุฉ ูุงูุฃุบุฐูุฉ โ ูุทููุฑ ูุงุฌูุงุช ุฅููุชุฑูููุฉ ูุงูุฃูุนุงุจ ุงูุชูุงุนููุฉ</div>
        <div class="credit-badge">โจ v1.0</div>
      </div>
      <div class="credit-holo"></div>
    </div>
  </nav>

  <main class="content">
    <div id="mapContainer" class="map-container" aria-label="ุฎุฑูุทุฉ ุงููุงุนุงุช">
      <div id="mapWrapper" class="map-wrapper">
        <!-- ุงุณุชุจุฏู map-1.png ุจุตูุฑุชู ุงููุนููุฉ -->
        <img id="mapImage" src="map-1.png" alt="ุฎุฑูุทุฉ ุงููุงุนุงุช">
        <canvas id="pathCanvas" aria-hidden="true"></canvas>
        <div id="pin" aria-hidden="true" title="ูููุน ุงููุงุนุฉ"></div>
        <div id="animMarker" aria-hidden="true" title="ูุคุดุฑ ุงููุณุงุฑ"></div>
      </div>
    </div>

    <aside class="form-container" aria-label="ุฃุฏูุงุช ุงูุจุญุซ">
      <div id="stairsSlot"></div>

      <label for="roomInput" class="visually-hidden">ุฑูู ุงููุงุนุฉ</label>
      <input type="text" id="roomInput" list="roomList" placeholder="ุงูุชุจ ุฑูู ุงููุงุนุฉ" aria-label="ุฑูู ุงููุงุนุฉ">
      <datalist id="roomList"></datalist>

      <div class="form-actions">
        <button id="searchBtn" class="btn-primary">ุงุจุญุซ</button>
        <button id="resetBtn" class="btn-secondary">ุฅุนุงุฏุฉ ุชุนููู</button>
      </div>

      <p id="errorMessage" class="error-message" role="status" aria-live="polite" style="display:none;">ูุฑุฌู ุฅุฏุฎุงู ุฑูู ูุงุนุฉ ุตุญูุญ.</p>
    </aside>
  </main>

  <footer class="footer">ุจุฅุดุฑุงู ุงูุฃุณุชุงุฐ ููุตูุฑ ุงูุจุญุฑู ยฉ ุงูุทุงูุจ ููุฏ ุนุจุฏุงููู ุงููุญุทุงูู</footer>

  <!-- Home Info Modal -->
  <div id="homeInfoModal" class="modal" role="dialog" aria-hidden="true" aria-labelledby="homeTitle" aria-modal="true">
    <div class="modal-backdrop" id="homeBackdrop"></div>
    <div class="modal-card fullscreen" role="document" aria-labelledby="homeTitle">
      <button id="closeHomeInfo" class="modal-close" data-close aria-label="ุฅุบูุงู">ร</button>
      <h3 id="homeTitle">ุนู ุฎุฑูุทุฉ ุงููุงุนุงุช</h3>
      <pre id="homeTyping" class="typing-output" aria-live="polite">ูุจุงุฏุฑุฉ ุทูุงุจูุฉ ูุชุณููู ุงููุตูู ุฅูู ุงููุงุนุงุช ุฏุงุฎู ูููุฉ ุงูุนููู ุงูุฒุฑุงุนูุฉ ูุงูุฃุบุฐูุฉ.</pre>
      <div style="margin-top:12px;text-align:left;"><button id="closeHomeInfoBtn" class="btn-secondary" data-close>ุฅุบูุงู</button></div>
    </div>
  </div>

  <!-- Email Modal -->
  <div id="emailModal" class="modal" role="dialog" aria-hidden="true" aria-labelledby="modalTitle" aria-modal="true">
    <div class="modal-backdrop" id="modalBackdrop"></div>
    <div class="modal-card email-fancy fullscreen" role="document" aria-labelledby="modalTitle">
      <button id="closeModal" class="modal-close" data-close aria-label="ุฅุบูุงู">ร</button>
      <h3 id="modalTitle">ุงุณุชุฎุฑุงุฌ ุงูุจุฑูุฏ ุงูุฌุงูุนู</h3>
      <p class="hint email-hint">ุฃุฏุฎู ุงูุฑูู ุงูุฌุงูุนู ูุฅุธูุงุฑ ุงูุจุฑูุฏ ุงูุฑุณูู ุงูุฎุงุต ุจู</p>
      <label for="uniIdInput">ุงูุฑูู ุงูุฌุงูุนู</label>
      <input id="uniIdInput" type="text" placeholder="ูุซุงู: 221122334" inputmode="numeric">

      <div class="modal-row" style="margin-top:8px;">
        <button id="genEmailBtn" class="btn-primary">ุงุณุชุฎุฑุฌ</button>
        <button id="closeModalBtn" class="btn-secondary" data-close>ุฅุบูุงู</button>
      </div>

      <div id="emailResult" class="email-result" style="display:none;margin-top:10px;">
        <input id="emailOutput" readonly>
        <div class="modal-row" style="margin-top:8px;">
          <button id="copyEmailBtn" class="btn-copy">ูุณุฎ</button>
          <button id="openMailBtn" class="btn-primary">ูุชุญ ูู ุงูุจุฑูุฏ</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Complaint Modal -->
  <div id="complaintModal" class="modal" role="dialog" aria-hidden="true" aria-labelledby="complaintTitle" aria-modal="true">
    <div class="modal-backdrop" id="complaintBackdrop"></div>
    <div class="modal-card fullscreen" role="document" aria-labelledby="complaintTitle">
      <button id="closeComplaint" class="modal-close" data-close aria-label="ุฅุบูุงู">ร</button>
      <h3 id="complaintTitle">โ๏ธ ุชูุงุตู ูุนูุง / ุฑูุน ุงูุชุฑุงุญ</h3>
      <div class="complaint-instructions">
        <strong>ูุงุฐุง ุชูุนู ูุฐู ุงููุงูุฐุฉุ</strong>
        <p>ุฃุฑุณู ููุง ููุงุญุธุฉุ ุดูููุ ุฃู ุงูุชุฑุงุญ ูุชุญุณูู ุงูุฎุฑูุทุฉ. ุณูุชููุงูุง ูุฑูู ุงูุฏุนู ูุจุงุดุฑุฉ.</p>
      </div>

      <div class="grid">
        <label for="complainName">ุงูุงุณู (ุงุฎุชูุงุฑู)</label>
        <input id="complainName" type="text" placeholder="ุงูุงุณู">

        <label for="complainUni">ุงูุฑูู ุงูุฌุงูุนู</label>
        <input id="complainUni" type="text" inputmode="numeric" placeholder="ูุซุงู: 221122334">

        <label for="complainPhone">ุฑูู ุงูุชูุงุตู</label>
        <input id="complainPhone" type="text" placeholder="+9665...">

        <label for="complainMsg">ูุต ุงูุดููู / ุงูุงูุชุฑุงุญ</label>
        <textarea id="complainMsg" rows="6" placeholder="ุงูุชุจ ุงูุดููู ุฃู ุงูุงูุชุฑุงุญ..."></textarea>

        <label for="complainFile">ุฅุฑูุงู ุตูุฑุฉ (ุงุฎุชูุงุฑู)</label>
        <input id="complainFile" type="file" accept="image/*">

        <div id="previewWrap" class="preview-wrap" style="display:none;">
          <div class="preview-title">ูุนุงููุฉ ุงูุตูุฑุฉ:</div>
          <img id="previewImg" src="" alt="ูุนุงููุฉ">
          <div style="display:flex;gap:8px;margin-top:6px;">
            <button id="downloadPreview" class="btn-primary small">ุชุญููู</button>
            <button id="removePreview" class="btn-secondary small" data-remove>ุฅุฒุงูุฉ ุงูุตูุฑุฉ</button>
          </div>
        </div>
      </div>

      <div class="modal-row" style="margin-top:12px;">
        <button id="sendComplaintBtn" class="btn-primary accent">ุฃุฑุณู</button>
        <button id="closeComplaintBtn" class="btn-secondary" data-close>ุฅุบูุงู</button>
      </div>

      <div id="complaintStatus" class="status" style="margin-top:10px;"></div>
      <div class="note" style="margin-top:8px;">ููุงุญุธุฉ: ุณูุชู ุงูุฑุฏ ูู ุฃูุฑุจ ููุช ูููู ูุดูุฑูุง ูุชููููู.</div>
    </div>
  </div>

  <!-- Dean Modal -->
  <div id="deanModal" class="modal" role="dialog" aria-hidden="true" aria-labelledby="deanTitle" aria-modal="true">
    <div class="modal-backdrop" id="deanBackdrop"></div>
    <div class="modal-card fullscreen" role="document" aria-labelledby="deanTitle">
      <button id="closeDean" class="modal-close" data-close aria-label="ุฅุบูุงู">ร</button>
      <h3 id="deanTitle">ุนููุฏ ุงููููุฉ</h3>
      <div class="modal-inner">
        <p><strong>ุงูููุจ:</strong> ุนููุฏ ูููุฉ ุงูุนููู ุงูุฒุฑุงุนูุฉ ูุงูุฃุบุฐูุฉ</p>
        <p><strong>ุงูุฏูุฑ:</strong> ูุณุคูู ุนู ุฅุฏุงุฑุฉ ุงููููุฉ ูุฃูุณุงููุง ุงูุนูููุฉ.</p>
        <p><strong>ููููุฉ ุงูุชูุงุตู:</strong> ุงุถุบุท "ูุฑุงุณูุฉ ุงูุนููุฏ ุนุจุฑ ูุงุชุณุงุจ" ูู ุงููุงุฆูุฉ ูุฅุฑุณุงู ุฑุณุงูุฉ ูุจุงุดุฑุฉ.</p>
        <div style="margin-top:12px;text-align:left;"><button id="closeDeanBtn" class="btn-secondary" data-close>ุฅุบูุงู</button></div>
      </div>
    </div>
  </div>

  <!-- About Modal (ูุงุญุฏ ููุท, ููุตูุญ ุงููุต) -->
  <div id="aboutModal" class="modal" role="dialog" aria-hidden="true" aria-labelledby="aboutTitle" aria-modal="true">
    <div class="modal-backdrop" id="aboutBackdrop"></div>
    <div class="modal-card fullscreen" role="document" aria-labelledby="aboutTitle">
      <button id="closeAbout" class="modal-close" data-close aria-label="ุฅุบูุงู">ร</button>
      <h3 id="aboutTitle">ูู ูุญู</h3>
      <div class="typing-output about-text">
        <p><strong>ูุฑูู ุฎุฑูุทุฉ ุงููุงุนุงุช</strong> โ ูุจุงุฏุฑุฉ ุชูุฏู ูุชุณููู ุงููุตูู ุฅูู ุงููุงุนุงุช ุฏุงุฎู ูููุฉ ุงูุนููู ุงูุฒุฑุงุนูุฉ ูุงูุฃุบุฐูุฉ.</p>
        <p>ูุฑุญุจ ุจุงููุณุงููุงุช ูุงูุงูุชุฑุงุญุงุช ูุชุญุณูู ุงูุชุฌุฑุจุฉ.</p>
      </div>
      <div style="margin-top:12px;text-align:left;"><button id="closeAboutBtn" class="btn-secondary" data-close>ุฅุบูุงู</button></div>
    </div>
  </div>

  <!-- Dynamic Ad Modal -->
  <div id="adModal" class="modal ad-modal" role="dialog" aria-hidden="true" aria-modal="true">
    <div class="modal-backdrop" id="adBackdrop"></div>
    <div class="modal-card ad-card animated" role="document">
      <div class="ad-content">
        <div class="ad-icon">๐ข</div>
        <div class="ad-title" id="adTitle">ุฅุนูุงู ููู</div>
        <div class="ad-message" id="adMessage">ุฑุณุงูุฉ ุงูุฅุนูุงู ุณุชุธูุฑ ููุง</div>
        <div class="ad-image-container" id="adImageContainer" style="display:none;">
          <img id="adImage" src="" alt="ุตูุฑุฉ ุงูุฅุนูุงู">
        </div>
        <div class="ad-actions">
          <button id="adActionBtn" class="btn-primary ad-btn" style="display:none;">ุงุถุบุท ููุง</button>
          <button id="closeAdBtn" class="btn-secondary ad-btn-close">ูููุช</button>
        </div>
      </div>
      <div class="ad-sparkles">โจ</div>
    </div>
  </div>

  <!-- external data + scripts (ูุถูููุฉ ูุฑุฉ ูุงุญุฏุฉ) -->
  <script src="rooms.js" defer></script>
  <script src="paths.rel.js" defer></script>
  <script src="script.js" defer></script>
</body>
</html>

